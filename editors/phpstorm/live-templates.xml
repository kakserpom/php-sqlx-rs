<?xml version="1.0" encoding="UTF-8"?>
<!--
  PHP-SQLx Live Templates for PHPStorm/IntelliJ

  Import via: Settings > Editor > Live Templates > Import
-->
<templateSet group="PHP-SQLx">
  <template name="sqlxq" value="&#36;driver->queryAll('$SQL$', [$PARAMS$]);" description="SQLx query with parameters" toReformat="true" toShortenFQNames="true">
    <variable name="SQL" expression="" defaultValue="&quot;SELECT * FROM table WHERE id = ?i&quot;" alwaysStopAt="true"/>
    <variable name="PARAMS" expression="" defaultValue="&quot;&quot;" alwaysStopAt="true"/>
    <context>
      <option name="PHP" value="true"/>
    </context>
  </template>

  <template name="sqlxrow" value="&#36;driver->queryRow('$SQL$', [$PARAMS$]);" description="SQLx query single row" toReformat="true" toShortenFQNames="true">
    <variable name="SQL" expression="" defaultValue="&quot;SELECT * FROM table WHERE id = ?i&quot;" alwaysStopAt="true"/>
    <variable name="PARAMS" expression="" defaultValue="&quot;&quot;" alwaysStopAt="true"/>
    <context>
      <option name="PHP" value="true"/>
    </context>
  </template>

  <template name="sqlxval" value="&#36;driver->queryValue('$SQL$', [$PARAMS$]);" description="SQLx query single value" toReformat="true" toShortenFQNames="true">
    <variable name="SQL" expression="" defaultValue="&quot;SELECT COUNT(*) FROM table&quot;" alwaysStopAt="true"/>
    <variable name="PARAMS" expression="" defaultValue="" alwaysStopAt="true"/>
    <context>
      <option name="PHP" value="true"/>
    </context>
  </template>

  <template name="sqlxexec" value="&#36;driver->execute('$SQL$', [$PARAMS$]);" description="SQLx execute statement" toReformat="true" toShortenFQNames="true">
    <variable name="SQL" expression="" defaultValue="&quot;UPDATE table SET col = ?s WHERE id = ?i&quot;" alwaysStopAt="true"/>
    <variable name="PARAMS" expression="" defaultValue="&quot;&quot;" alwaysStopAt="true"/>
    <context>
      <option name="PHP" value="true"/>
    </context>
  </template>

  <template name="sqlxcond" value="{{ $CONDITION$ }}" description="SQLx conditional block" toReformat="false" toShortenFQNames="true">
    <variable name="CONDITION" expression="" defaultValue="&quot;AND column = &#36;param&quot;" alwaysStopAt="true"/>
    <context>
      <option name="PHP String" value="true"/>
    </context>
  </template>

  <template name="sqlxin" value="&#36;$VAR$ IN :$PARAM$!$TYPE$a" description="SQLx IN clause with typed array" toReformat="false" toShortenFQNames="true">
    <variable name="VAR" expression="" defaultValue="&quot;id&quot;" alwaysStopAt="true"/>
    <variable name="PARAM" expression="" defaultValue="&quot;ids&quot;" alwaysStopAt="true"/>
    <variable name="TYPE" expression="" defaultValue="&quot;i&quot;" alwaysStopAt="true"/>
    <context>
      <option name="PHP String" value="true"/>
    </context>
  </template>

  <template name="sqlxins" value="INSERT INTO $TABLE$ ($COLUMNS$) VALUES ($VALUES$)" description="SQLx INSERT statement" toReformat="false" toShortenFQNames="true">
    <variable name="TABLE" expression="" defaultValue="&quot;table_name&quot;" alwaysStopAt="true"/>
    <variable name="COLUMNS" expression="" defaultValue="&quot;col1, col2&quot;" alwaysStopAt="true"/>
    <variable name="VALUES" expression="" defaultValue="&quot;?s, ?i&quot;" alwaysStopAt="true"/>
    <context>
      <option name="PHP String" value="true"/>
    </context>
  </template>

  <template name="sqlxupd" value="UPDATE $TABLE$ SET $SETS$ WHERE $WHERE$" description="SQLx UPDATE statement" toReformat="false" toShortenFQNames="true">
    <variable name="TABLE" expression="" defaultValue="&quot;table_name&quot;" alwaysStopAt="true"/>
    <variable name="SETS" expression="" defaultValue="&quot;col1 = ?s, col2 = ?i&quot;" alwaysStopAt="true"/>
    <variable name="WHERE" expression="" defaultValue="&quot;id = ?i&quot;" alwaysStopAt="true"/>
    <context>
      <option name="PHP String" value="true"/>
    </context>
  </template>

  <template name="sqlxtx" value="&#36;driver->begin(function(&#36;driver) {&#10;    $CODE$&#10;});" description="SQLx transaction with callback" toReformat="true" toShortenFQNames="true">
    <variable name="CODE" expression="" defaultValue="&quot;// transaction code&quot;" alwaysStopAt="true"/>
    <context>
      <option name="PHP" value="true"/>
    </context>
  </template>

  <template name="sqlxhook" value="&#36;driver->onQuery(function(string &#36;sql, string &#36;sqlInline, float &#36;durationMs) {&#10;    $CODE$&#10;});" description="SQLx query profiling hook" toReformat="true" toShortenFQNames="true">
    <variable name="CODE" expression="" defaultValue="&quot;Logger::debug(\&quot;Query took {\$durationMs}ms: {\$sqlInline}\&quot;);&quot;" alwaysStopAt="true"/>
    <context>
      <option name="PHP" value="true"/>
    </context>
  </template>
</templateSet>
